<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok Uploader</title>
    <script src="script.js"></script>
</head>
<body>
    <input id="url" />
    <button id="btn" onclick="getURL()">Submit</button>
    <div id="rep"></div>
    <script>
        const url = new URL(window.location.href);
        const code = url.search.replace("?code=","").replace("&scopes=user.info.basic","");
        console.log(code);
        const clientKey = "sbaw6p4l7ya31c98xm"
        const clientSecret = "ShEFuXUPlYnD8JJY55aoVHAvRMBca1ni"
        const grantType = 'authorization_code';  // ou 'client_credentials' selon votre cas d'utilisation
        const redirectUri = 'https://adrikiwii.github.io/TikAutomate/connect';  // Si nécessaire
        // URL de l'API TikTok pour obtenir le token
        const urlRequest = 'https://open.tiktokapis.com/v2/oauth/token/';

        // Paramètres de la requête
        const params = new URLSearchParams();
        params.append('client_key', clientKey);
        params.append('client_secret', clientSecret);
        params.append('grant_type', grantType);
        if (grantType === 'authorization_code') {
            params.append('code', code);
            params.append('redirect_uri', redirectUri);
        }

        // Faire la requête POST
        fetch(urlRequest, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
        body: params
        })
        .then(response => response.json())
        .then(data => {
            // Réponse réussie
            console.log('Access Token:', data.access_token);
            console.log('Refresh Token:', data.refresh_token);
        })
        .catch(error => {
            // Erreur dans la requête
            console.error('Erreur:', error);
        });
    </script>
</body>
</html>